\ProvidesPackage{portada}
\RequirePackage{xcolor}
\RequirePackage{changepage}
\RequirePackage{eso-pic}
\RequirePackage{geometry}
\RequirePackage{graphicx}
\RequirePackage{transparent}

\definecolor{PortadaBlue}{HTML}{31489F}

\def\director{Falta \textbackslash{Director\{Nombre de tu director\}}}

\newcommand\Director[1]{
  \def\director{#1}
}

\def\lugar{Sevilla}

\newcommand\Lugar[1]{
  \def\lugar{#1}
}

\def\universidad{Universidad de Sevilla}

\newcommand\Universidad[1]{
  \def\universidad{#1}
}

\def\escuela{Escuela Politécnica Superior}

\newcommand\Escuela[1]{
  \def\escuela{#1}
}

\def\titulacion{Graduado en Ingeniería Informática}

\newcommand\Titulacion[1]{
  \def\titulacion{#1}
}

\def\trabajo{Trabajo de Fin de Grado}

\newcommand\Trabajo[1]{
  \def\trabajo{#1}
}

\def\titulotrabajo{Título del Trabajo con Letras Capitales para Sustantivos y Adjetivos}

\newcommand\TituloTrabajo[1]{
  \def\titulotrabajo{#1}
}

\renewcommand*{\maketitle}{\begin{titlepage}
    \AddToShipoutPicture*{
      \put(-157.5,0){
        \parbox[b][\paperheight]{\paperwidth}{
          \vfill
          \centering
          \transparent{0.25}
          \includegraphics[width=1.5\paperwidth]{portada/fondo.png}
          \vfill
        }
      }
    }

    \newgeometry{inner=1.5cm,outer=1.5cm,top=1.5cm,bottom=1.5cm}

    \begin{figure}
      \begin{minipage}{.5\linewidth}
        \begin{flushleft}
          \includegraphics[scale=3]{portada/logo1.png}
        \end{flushleft}
      \end{minipage}
      \begin{minipage}{.5\linewidth}
        \begin{flushright}
          \includegraphics[scale=2.5]{portada/logo2.png}
        \end{flushright}
      \end{minipage}
    \end{figure}

    \vspace*{1cm}

    \begin{center}
      {\color{PortadaBlue}
        {\LARGE\bf \titulacion}\\[1.5cm]
        {\LARGE \universidad}\\[0.2cm]
        {\LARGE \escuela}\\[1.5cm]
        {\LARGE\bf \trabajo}\\[1.5cm]
        \begin{minipage}{12.5cm}
          \begin{center}
            {\Huge\bfseries\titulotrabajo}
          \end{center}
        \end{minipage}
        

      }
    \end{center}

    


    \AddToShipoutPictureFG*{
      \put(\LenToUnit{0.50\paperwidth},\LenToUnit{0.28\paperheight}){
        \vtop{{\null}\makebox[0pt][c]{
            \color{PortadaBlue}
            \begin{tabular}{rl}
              \LARGE Autor: & \LARGE \@author \\[0.5cm]
              \LARGE Director: & \LARGE \director
            \end{tabular}
        }}
      }
    }

    \AddToShipoutPictureFG*{
      \put(\LenToUnit{0.70\paperwidth},\LenToUnit{0.12\paperheight}){
        \vtop{{\null}\makebox[0pt][c]{
            \color{PortadaBlue}
            \large{\lugar, \@date}
        }}
      }
    }

    \restoregeometry

    \ClearShipoutPicture
  \end{titlepage}

  \newpage
}
